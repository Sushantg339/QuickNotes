import{i as u,c as f,d as b,e as N,f as y,g as j,u as m,r as d,j as e,y as c,h as w}from"./index-BZx_hDr7.js";import{u as v}from"./index.esm-DAtYEo2S.js";const C=()=>async t=>{try{const r=await u.get("/note");t(f(r.data?.notes||[]))}catch(r){throw t(b()),console.error("Error fetching notes:",r.response?.data||r.message),r}},S=t=>async r=>{try{const s=await u.post("/note",t);return r(N(s.data.note)),s.data.note}catch(s){throw console.error("Error creating note:",s.response?.data||s.message),s}},E=(t,r)=>async(s,n)=>{try{const a=await u.put(`/note/${t}`,r);return s(j(a.data.note)),a.data.note}catch(a){throw console.error("Error updating note:",a.response?.data||a.message),a}},k=t=>async r=>{try{return await u.delete(`/note/${t}`),r(y(t)),t}catch(s){throw console.error("Error deleting note:",s.response?.data||s.message),s}},D=()=>{const t=m(),[r,s]=d.useState(!1),{register:n,handleSubmit:a,formState:{errors:o},reset:l}=v(),x=async g=>{s(!0);try{await t(S(g)),c.success("Note Created Successfully"),l()}catch(h){c.error(h.response?.data?.message||"Error Creating Note")}finally{s(!1)}};return e.jsxs("form",{onSubmit:a(x),className:"bg-gray-100 shadow-lg rounded-2xl px-8 py-10 flex flex-col gap-5",children:[e.jsx("h2",{className:"text-2xl font-bold text-center text-gray-800 mb-4",children:"Create a Note"}),e.jsxs("div",{className:"flex flex-col",children:[e.jsx("input",{...n("title",{required:"Title is required"}),type:"text",placeholder:"Title",className:`px-3 py-2 rounded-lg border focus:outline-none focus:ring-2 
            ${o.title?"border-red-500 focus:ring-red-500":"border-gray-300 focus:ring-black"}`}),o.title&&e.jsx("span",{className:"text-red-500 text-sm",children:o.title.message})]}),e.jsxs("div",{className:"flex flex-col",children:[e.jsx("textarea",{...n("content",{required:"Content is required"}),placeholder:"Write your note...",rows:"6",className:`px-3 py-2 rounded-lg border focus:outline-none focus:ring-2 resize-none
            ${o.content?"border-red-500 focus:ring-red-500":"border-gray-300 focus:ring-black"}`}),o.content&&e.jsx("span",{className:"text-red-500 text-sm",children:o.content.message})]}),e.jsx("button",{type:"submit",className:"bg-black text-white cursor-pointer py-2 rounded-full hover:bg-gray-400 hover:text-gray-900 transition-all duration-300 flex justify-center items-center",disabled:r,children:r?e.jsx("div",{className:"w-5 h-5 border-2 border-white border-t-transparent rounded-full animate-spin"}):"Create Note"})]})},F=({note:t})=>{const r=m(),[s,n]=d.useState(!1),[a,o]=d.useState(!1),[l,x]=d.useState({title:t.title,content:t.content}),g=()=>{try{r(k(t._id)),c.success("Note Deleted Successfully"),n(!1)}catch{c.error("Error deleting note")}},h=()=>{try{r(E(t._id,l)),c.success("Note Updated Successfully"),n(!1)}catch{c.error("Error updating note")}},p=new Date(t.createdAt).toLocaleDateString("en-IN",{day:"2-digit",month:"short",year:"numeric"});return e.jsxs(e.Fragment,{children:[e.jsxs("div",{className:"w-[48%] p-4 border border-gray-200 rounded-lg flex flex-col justify-between bg-white shadow-md cursor-pointer hover:shadow-xl transition-all duration-300",onClick:()=>n(!0),children:[e.jsxs("div",{children:[e.jsx("h3",{className:"text-lg font-semibold text-gray-800",children:t.title}),e.jsx("p",{className:"text-gray-600 text-sm mt-1 line-clamp-2",children:t.content})]}),e.jsx("div",{className:"mt-4 flex justify-between items-center",children:e.jsxs("span",{className:"text-xs text-gray-500",children:["Created: ",p]})})]}),s&&e.jsx("div",{className:"fixed inset-0 bg-black/50 backdrop-blur-sm flex justify-center items-center z-50",children:e.jsx("div",{className:"bg-white rounded-lg shadow-lg p-6 w-[500px] max-w-[90%]",children:a?e.jsxs(e.Fragment,{children:[e.jsx("h2",{className:"text-xl font-bold mb-4",children:"Update Note"}),e.jsx("input",{type:"text",value:l.title,onChange:i=>x({...l,title:i.target.value}),className:"w-full px-3 py-2 mb-3 border rounded focus:outline-none focus:ring-2 focus:ring-blue-500"}),e.jsx("textarea",{value:l.content,onChange:i=>x({...l,content:i.target.value}),className:"w-full px-3 py-2 mb-3 border rounded focus:outline-none focus:ring-2 focus:ring-blue-500",rows:"5"}),e.jsxs("div",{className:"flex justify-end gap-3",children:[e.jsx("button",{onClick:()=>o(!1),className:"px-4 py-2 rounded bg-gray-300 hover:bg-gray-400 transition",children:"Cancel"}),e.jsx("button",{onClick:h,className:"px-4 py-2 rounded bg-green-500 text-white hover:bg-green-600 transition",children:"Save Changes"})]})]}):e.jsxs(e.Fragment,{children:[e.jsx("h2",{className:"text-2xl font-bold mb-3",children:t.title}),e.jsx("p",{className:"text-gray-700 mb-4 whitespace-pre-line",children:t.content}),e.jsxs("p",{className:"text-xs text-gray-500 mb-6",children:["Created on: ",p]}),e.jsxs("div",{className:"flex justify-end gap-3",children:[e.jsx("button",{onClick:()=>n(!1),className:"px-4 py-2 rounded bg-gray-300 hover:bg-gray-400 transition",children:"Close"}),e.jsx("button",{onClick:()=>o(!0),className:"px-4 py-2 rounded bg-blue-500 text-white hover:bg-blue-600 transition",children:"Update Note"}),e.jsx("button",{onClick:g,className:"px-4 py-2 rounded bg-red-500 text-white hover:bg-red-600 transition",children:"Delete Note"})]})]})})})]})},q=()=>{const t=m(),{notes:r}=w(s=>s.note);return d.useEffect(()=>{t(C())},[t]),e.jsxs("div",{className:"bg-white shadow-lg rounded-2xl p-6",children:[e.jsx("h2",{className:"text-2xl font-bold text-gray-800 mb-4",children:"Your Notes"}),r.length===0?e.jsx("p",{className:"text-gray-500",children:"No notes available."}):e.jsx("div",{className:"flex flex-wrap gap-4",children:r.map(s=>e.jsx(F,{note:s},s._id))})]})},L=()=>e.jsxs("div",{className:"min-h-[89vh] bg-gray-200 p-6 grid grid-cols-1 md:grid-cols-2 gap-6",children:[e.jsx(D,{}),e.jsx(q,{})]});export{L as default};
